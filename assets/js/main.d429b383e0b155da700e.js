(()=>{"use strict";var e={p:"./"};(()=>{const t=[{id:0,name:"banana",img:e.p+"assets/images/95fee7009c951a87b353.png"},{id:1,name:"blackBerryDark",img:e.p+"assets/images/8827348451b957996e61.png"},{id:2,name:"blackCherry",img:e.p+"assets/images/0b9b889eec9b026c4949.png"},{id:3,name:"greenGrape",img:e.p+"assets/images/49a95db80e62a857c1f0.png"},{id:4,name:"lemon",img:e.p+"assets/images/5c257921cfbc10ce2f4b.png"},{id:5,name:"lime",img:e.p+"assets/images/417ca81a7c21b9c62f96.png"},{id:6,name:"orange",img:e.p+"assets/images/948ab90fbdeace81e3e7.png"},{id:7,name:"peach",img:e.p+"assets/images/e0a90d41e14935c9d222.png"},{id:8,name:"pear",img:e.p+"assets/images/1353afc166c958f37827.png"},{id:9,name:"plum",img:e.p+"assets/images/39dc2fa2825fd27b2ada.png"},{id:10,name:"raspberry",img:e.p+"assets/images/84de5196873eeebb13f4.png"},{id:11,name:"redApple",img:e.p+"assets/images/a6f8cf139b456b148dfc.png"},{id:12,name:"redCherry",img:e.p+"assets/images/bb79b6bc30fb851d39be.png"},{id:13,name:"strawberry",img:e.p+"assets/images/5c2607f739246b5852e2.png"},{id:14,name:"watermelon",img:e.p+"assets/images/cf56dd046015ee68877c.png"}];var s=function(e,t,s,a){return new(s||(s=Promise))((function(n,r){function i(e){try{o(a.next(e))}catch(e){r(e)}}function d(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,d)}o((a=a.apply(e,t||[])).next())}))};const a=new class{constructor(){this.tourInProgress=!1,this.gameInProgress=!1}createBoard(){this.gameInProgress=!0;const e=r.getLevel(),s=t.sort((()=>Math.random()-Math.random())).slice(0,e),a=[];for(let t=0;t<2*e;t++){const n=()=>{const t=(r=0,i=e-1,Math.floor(Math.random()*(i-r+1))+r);var r,i;const d=s[t];return a.filter((e=>e.id===d.id)).length>1?n():Object.assign(Object.assign({},s[t]),{completed:!1})},r=n();a[t]=r}this.board=a,this.renderBoard()}renderBoard(){if(!this.board)return;const e=document.getElementById("board");if(!e)throw new Error('element with id "board" does not exists');let t=0;for(const s of this.board)e.innerHTML+=`\n                <div class="game-card" data-index="${t}">\n                    <div class="game-card__inner">\n                        <div class="game-card__front">\n                            <img\n                                src=${s.img}\n                                alt=${s.name}\n                                draggable="false"\n                            />\n                        </div>\n                        <div class="game-card__back">\n                            <div class="game-card__back-image" />\n                        </div>\n                    </div>\n                </div>`,t++;document.querySelectorAll(".game-card").forEach((e=>{e.addEventListener("click",(()=>a.handleCardClick(e,Number(e.dataset.index))))}))}handleCardClick(e,t){return s(this,void 0,void 0,(function*(){if(this.board&&!this.tourInProgress&&t!==this.currentCardIndex&&!this.board[t].completed){if(this.tourInProgress=!0,e.classList.add("game-card--active"),void 0===this.currentCardIndex)return this.currentCardIndex=t,this.currentCardElement=e,void(this.tourInProgress=!1);yield new Promise((s=>setTimeout((()=>{var a,n,r;this.board&&void 0!==this.currentCardIndex&&(this.board[this.currentCardIndex].id===this.board[t].id?(null===(a=this.currentCardElement)||void 0===a||a.classList.remove("game-card--active"),null===(n=this.currentCardElement)||void 0===n||n.classList.add("game-card--completed"),this.board[this.currentCardIndex].completed=!0,e.classList.remove("game-card--active"),e.classList.add("game-card--completed"),this.board[t].completed=!0):(null===(r=this.currentCardElement)||void 0===r||r.classList.remove("game-card--active"),e.classList.remove("game-card--active")),s(void 0))}),r.getSpeed()))),this.currentCardElement=void 0,this.currentCardIndex=void 0,r.makeMove(),this.checkGameStatus(),this.tourInProgress=!1}}))}checkGameStatus(){var e;const t=null===(e=this.board)||void 0===e?void 0:e.filter((e=>e.completed));if((null==t?void 0:t.length)===2*r.getLevel()){this.gameInProgress=!1,this.board=[],r.endGame();const e=document.getElementById("board");if(!e)throw new Error('element with id "board" does not exists');e.innerHTML=""}}getGameProgress(){return this.gameInProgress}},n=document.querySelector(".modal-wrapper");const r=new class{constructor(){this.level=5,this.moves=0,this.roundsPlayed=0,this.speed=1e3;const e=document.getElementById("moves"),t=document.getElementById("level"),s=document.getElementById("rounds-played"),a=document.querySelectorAll(".game-table__button");this.movesElement=e,this.levelElement=t,this.roundsPlayedElement=s,this.speedButtons=a,a.forEach((e=>e.addEventListener("click",(()=>this.changeSpeed(e.value,e)))))}changeSpeed(e,t){if(!t.classList.contains("game-table__button--active"))return this.speedButtons.forEach((e=>e.classList.remove("game-table__button--active"))),t.classList.add("game-table__button--active"),this.speed="fast"===e?500:"slow"===e?3e3:1e3}getSpeed(){return this.speed}getLevel(){return this.level}makeMove(){this.moves++,this.renderInfo()}renderInfo(){this.movesElement.textContent=this.moves.toString(),this.levelElement.textContent=this.level.toString(),this.roundsPlayedElement.textContent=this.roundsPlayed.toString()}startGame(){this.moves=0,null==n||n.classList.add("modal-wrapper--hidden"),this.renderInfo(),a.createBoard()}endGame(){this.roundsPlayed++,this.renderInfo(),null==n||n.classList.remove("modal-wrapper--hidden")}},i=document.getElementById("start-button");r.renderInfo(),null==i||i.addEventListener("click",(()=>r.startGame()))})()})();